---
layout: post
title: 'Docker安装与相关指令'
date: 2021-11-02
author: YY
cover: 'https://yyblog.win/assets/img/docker.jpg'
tags:  Docker 分布式数据库
---



# 1.CentOS Docker 安装

## 1.1 官方脚本自动安装

Aliyun镜像

`curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun`

## 1.2 手动安装

#### 1.2.1 若有旧版本，先卸载

```shell
$ sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
```

#### 1.2.2 设置仓库

首先安装yum-config-manager和evice mapper 存储驱动程序需要 device-mapper-persistent-data 和 lvm2。

```shell
$ sudo yum install -y yum-utils \
  device-mapper-persistent-data \
  lvm2
```

官方源

```shell
$ sudo yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo
```

Aliyun源

```shell
$ sudo yum-config-manager \
    --add-repo \
    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
```

清华源

```shell
$ sudo yum-config-manager \
    --add-repo \
    https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo
```

#### 1.2.3 安装 Docker Engine-Community

**安装最新版**

```shell
$ sudo yum install docker-ce docker-ce-cli containerd.io
```

如果提示接受 GPG 密钥，选是。

**安装特定版**

1、列出可用版本

```shell
$ yum list docker-ce --showduplicates | sort -r

docker-ce.x86_64  3:18.09.1-3.el7                     docker-ce-stable
docker-ce.x86_64  3:18.09.0-3.el7                     docker-ce-stable
docker-ce.x86_64  18.06.1.ce-3.el7                    docker-ce-stable
docker-ce.x86_64  18.06.0.ce-3.el7                    docker-ce-stable
```

2、选取可用版本安装

```shell
$ sudo yum install docker-ce-<VERSION_STRING> docker-ce-cli-<VERSION_STRING> containerd.io
```

## 1.3 启动Docker

```shell
sudo systemctl start docker
```

运行hello-world验证是否安装正确

```shell
$ sudo docker run hello-world
```

## 1.4 卸载Docker

删除安装包：

```shell
yum remove docker-ce
```

删除镜像、容器、配置文件等内容：

```shell
rm -rf /var/lib/docker
```

